{"asctime": "2026-01-19 22:04:27", "levelname": "WARNING", "name": "root", "message": "Redis connection failed: Error 10061 connecting to localhost:6379. No connection could be made because the target machine actively refused it.. Using database fallback for account locking.", "timestamp": "2026-01-19T17:04:27.107139+00:00"}
{"asctime": "2026-01-19 22:04:27", "levelname": "WARNING", "name": "utils.evidence_cache", "message": "Evidence cache service initialized without Redis (caching disabled)", "timestamp": "2026-01-19T17:04:27.114006+00:00"}
{"asctime": "2026-01-19 22:04:28", "levelname": "INFO", "name": "root", "message": "Token blacklist initialized with database backend", "timestamp": "2026-01-19T17:04:28.220082+00:00"}
{"asctime": "2026-01-19 22:04:28", "levelname": "INFO", "name": "utils.cache_invalidation", "message": "Cache invalidation event listeners setup complete", "timestamp": "2026-01-19T17:04:28.464186+00:00"}
{"asctime": "2026-01-19 22:13:27", "levelname": "WARNING", "name": "passlib.handlers.bcrypt", "message": "(trapped) error reading bcrypt version", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\passlib\\handlers\\bcrypt.py\", line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module 'bcrypt' has no attribute '__about__'", "timestamp": "2026-01-19T17:13:27.669409+00:00"}
{"asctime": "2026-01-19 22:13:38", "levelname": "INFO", "name": "root", "message": "Created refresh token for user testingaccount@gmail.com", "timestamp": "2026-01-19T17:13:38.011502+00:00"}
{"asctime": "2026-01-19 22:13:38", "levelname": "INFO", "name": "root", "message": "User logged in successfully", "email": "testingaccount@gmail.com", "role": "doctor", "client_ip": "127.0.0.1", "timestamp": "2026-01-19T17:13:38.012547+00:00"}
{"asctime": "2026-01-19 22:13:38", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/auth/token", "method": "POST", "status_code": 200, "process_time": "22755.73ms", "client_ip": "127.0.0.1", "timestamp": "2026-01-19T17:13:38.934017+00:00"}
{"asctime": "2026-01-19 22:13:38", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:50882 - \"POST /api/auth/token HTTP/1.1\" 200", "timestamp": "2026-01-19T17:13:38.936408+00:00"}
{"asctime": "2026-01-19 22:14:03", "levelname": "INFO", "name": "root", "message": "Token validated successfully for user: testingaccount@gmail.com", "timestamp": "2026-01-19T17:14:03.416839+00:00"}
{"asctime": "2026-01-19 22:14:04", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/doctor/sessions", "method": "GET", "status_code": 200, "process_time": "3213.65ms", "client_ip": "127.0.0.1", "timestamp": "2026-01-19T17:14:04.291686+00:00"}
{"asctime": "2026-01-19 22:14:04", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:62532 - \"GET /api/doctor/sessions HTTP/1.1\" 200", "timestamp": "2026-01-19T17:14:04.292643+00:00"}
{"asctime": "2026-01-19 22:14:06", "levelname": "INFO", "name": "root", "message": "Token validated successfully for user: testingaccount@gmail.com", "timestamp": "2026-01-19T17:14:06.549191+00:00"}
{"asctime": "2026-01-19 22:14:07", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/doctor/sessions", "method": "GET", "status_code": 200, "process_time": "3102.70ms", "client_ip": "127.0.0.1", "timestamp": "2026-01-19T17:14:07.595016+00:00"}
{"asctime": "2026-01-19 22:14:07", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:62532 - \"GET /api/doctor/sessions HTTP/1.1\" 200", "timestamp": "2026-01-19T17:14:07.595928+00:00"}
{"asctime": "2026-01-19 22:14:22", "levelname": "INFO", "name": "root", "message": "Token validated successfully for user: testingaccount@gmail.com", "timestamp": "2026-01-19T17:14:22.350771+00:00"}
{"asctime": "2026-01-19 22:14:23", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/doctor/sessions/13/history", "method": "GET", "status_code": 200, "process_time": "3568.53ms", "client_ip": "127.0.0.1", "timestamp": "2026-01-19T17:14:23.377916+00:00"}
{"asctime": "2026-01-19 22:14:23", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:58760 - \"GET /api/doctor/sessions/13/history?limit=50 HTTP/1.1\" 200", "timestamp": "2026-01-19T17:14:23.379118+00:00"}
{"asctime": "2026-01-19 22:17:10", "levelname": "INFO", "name": "root", "message": "Token validated successfully for user: testingaccount@gmail.com", "timestamp": "2026-01-19T17:17:10.347313+00:00"}
{"asctime": "2026-01-19 22:17:29", "levelname": "INFO", "name": "data_utils.vector_db", "message": "Successfully connected to Pinecone", "timestamp": "2026-01-19T17:17:29.441727+00:00"}
{"asctime": "2026-01-19 22:17:47", "levelname": "INFO", "name": "utils.doctor_response", "message": "Starting doctor_response_with_context with question: 1. How did you first realise something was wrong with your heart?...", "timestamp": "2026-01-19T17:17:47.917444+00:00"}
{"asctime": "2026-01-19 22:17:47", "levelname": "INFO", "name": "utils.doctor_response", "message": "Calling aquery_doc for 3 indices...", "timestamp": "2026-01-19T17:17:47.918853+00:00"}
{"asctime": "2026-01-19 22:17:47", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Starting async query_doc with query: 1. How did you first realise something was wrong with your heart?... on index: research", "timestamp": "2026-01-19T17:17:47.919687+00:00"}
{"asctime": "2026-01-19 22:17:47", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Attempting async similarity search on research...", "timestamp": "2026-01-19T17:17:47.920269+00:00"}
{"asctime": "2026-01-19 22:17:47", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Starting async query_doc with query: 1. How did you first realise something was wrong with your heart?... on index: expert", "timestamp": "2026-01-19T17:17:47.922009+00:00"}
{"asctime": "2026-01-19 22:17:47", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Attempting async similarity search on expert...", "timestamp": "2026-01-19T17:17:47.922737+00:00"}
{"asctime": "2026-01-19 22:17:47", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Starting async query_doc with query: 1. How did you first realise something was wrong with your heart?... on index: patient", "timestamp": "2026-01-19T17:17:47.924303+00:00"}
{"asctime": "2026-01-19 22:17:47", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Attempting async similarity search on patient...", "timestamp": "2026-01-19T17:17:47.925289+00:00"}
{"asctime": "2026-01-19 22:17:57", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2026-01-19T17:17:57.491674+00:00"}
{"asctime": "2026-01-19 22:18:02", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2026-01-19T17:18:02.702046+00:00"}
{"asctime": "2026-01-19 22:18:02", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2026-01-19T17:18:02.706200+00:00"}
{"asctime": "2026-01-19 22:18:09", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Retrieved 8 documents from vector DB", "timestamp": "2026-01-19T17:18:09.938370+00:00"}
{"asctime": "2026-01-19 22:18:09", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Starting reranking...", "timestamp": "2026-01-19T17:18:09.939148+00:00"}
{"asctime": "2026-01-19 22:18:09", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Retrieved 8 documents from vector DB", "timestamp": "2026-01-19T17:18:09.968685+00:00"}
{"asctime": "2026-01-19 22:18:09", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Starting reranking...", "timestamp": "2026-01-19T17:18:09.970309+00:00"}
{"asctime": "2026-01-19 22:18:10", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Retrieved 8 documents from vector DB", "timestamp": "2026-01-19T17:18:10.498702+00:00"}
{"asctime": "2026-01-19 22:18:10", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Starting reranking...", "timestamp": "2026-01-19T17:18:10.499713+00:00"}
{"asctime": "2026-01-19 22:18:13", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Reranking completed, got 5 reranked docs", "timestamp": "2026-01-19T17:18:13.843792+00:00"}
{"asctime": "2026-01-19 22:18:13", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Async query_doc on expert completed successfully", "timestamp": "2026-01-19T17:18:13.849469+00:00"}
{"asctime": "2026-01-19 22:18:14", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Reranking completed, got 5 reranked docs", "timestamp": "2026-01-19T17:18:14.656592+00:00"}
{"asctime": "2026-01-19 22:18:14", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Async query_doc on patient completed successfully", "timestamp": "2026-01-19T17:18:14.661157+00:00"}
{"asctime": "2026-01-19 22:18:14", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Reranking completed, got 5 reranked docs", "timestamp": "2026-01-19T17:18:14.781970+00:00"}
{"asctime": "2026-01-19 22:18:14", "levelname": "INFO", "name": "Rag_Service.retrieval", "message": "Async query_doc on research completed successfully", "timestamp": "2026-01-19T17:18:14.786982+00:00"}
{"asctime": "2026-01-19 22:18:14", "levelname": "INFO", "name": "utils.doctor_response", "message": "RAG Retrieval time (Parallel): 26.8685 seconds", "timestamp": "2026-01-19T17:18:14.787958+00:00"}
{"asctime": "2026-01-19 22:18:14", "levelname": "INFO", "name": "utils.doctor_response", "message": "RAG context formatted, length: 24774", "timestamp": "2026-01-19T17:18:14.789168+00:00"}
{"asctime": "2026-01-19 22:18:14", "levelname": "INFO", "name": "utils.doctor_response", "message": "Full message prepared with RAG context, length: 24919", "timestamp": "2026-01-19T17:18:14.789828+00:00"}
{"asctime": "2026-01-19 22:18:14", "levelname": "INFO", "name": "utils.doctor_response", "message": "Creating OpenAI stream with conversation context...", "timestamp": "2026-01-19T17:18:14.790386+00:00"}
{"asctime": "2026-01-19 22:18:17", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2026-01-19T17:18:17.306479+00:00"}
{"asctime": "2026-01-19 22:18:17", "levelname": "INFO", "name": "utils.doctor_response", "message": "OpenAI stream created successfully", "timestamp": "2026-01-19T17:18:17.307647+00:00"}
{"asctime": "2026-01-19 22:18:17", "levelname": "INFO", "name": "api.doctor_chat_v2", "message": "Starting streaming response...", "timestamp": "2026-01-19T17:18:17.920352+00:00"}
{"asctime": "2026-01-19 22:18:17", "levelname": "INFO", "name": "utils.doctor_response", "message": "Starting to stream response...", "timestamp": "2026-01-19T17:18:17.921354+00:00"}
{"asctime": "2026-01-19 22:18:17", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/doctor/stream", "method": "POST", "status_code": 200, "process_time": "69888.34ms", "client_ip": "127.0.0.1", "timestamp": "2026-01-19T17:18:17.945976+00:00"}
{"asctime": "2026-01-19 22:18:17", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:59818 - \"POST /api/doctor/stream HTTP/1.1\" 200", "timestamp": "2026-01-19T17:18:17.946942+00:00"}
{"asctime": "2026-01-19 22:18:28", "levelname": "INFO", "name": "utils.doctor_response", "message": "Streaming completed", "timestamp": "2026-01-19T17:18:28.065027+00:00"}
{"asctime": "2026-01-19 22:18:28", "levelname": "INFO", "name": "api.doctor_chat_v2", "message": "Streaming completed. Final assistant response length: 3570", "timestamp": "2026-01-19T17:18:28.065881+00:00"}
{"asctime": "2026-01-19 22:18:28", "levelname": "INFO", "name": "api.doctor_chat_v2", "message": "Total processing time for doctor RAG answer: 72.7798 seconds", "timestamp": "2026-01-19T17:18:28.066448+00:00"}
{"asctime": "2026-01-19 22:18:28", "levelname": "INFO", "name": "api.doctor_chat_v2", "message": "Finally block executing. Assistant response length: 3570", "timestamp": "2026-01-19T17:18:28.067203+00:00"}
{"asctime": "2026-01-19 22:18:28", "levelname": "INFO", "name": "api.doctor_chat_v2", "message": "Saving assistant response to memory...", "timestamp": "2026-01-19T17:18:28.067781+00:00"}
{"asctime": "2026-01-19 22:18:30", "levelname": "INFO", "name": "api.doctor_chat_v2", "message": "Assistant response saved successfully", "timestamp": "2026-01-19T17:18:30.985687+00:00"}
{"asctime": "2026-01-19 22:22:55", "levelname": "INFO", "name": "root", "message": "Token validated successfully for user: testingaccount@gmail.com", "timestamp": "2026-01-19T17:22:55.889349+00:00"}
{"asctime": "2026-01-19 22:23:03", "levelname": "INFO", "name": "root", "message": "Token validated successfully for user: testingaccount@gmail.com", "timestamp": "2026-01-19T17:23:03.775042+00:00"}
{"asctime": "2026-01-19 22:23:13", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/doctor/sessions/13", "method": "PUT", "status_code": 200, "process_time": "29248.63ms", "client_ip": "127.0.0.1", "timestamp": "2026-01-19T17:23:13.461996+00:00"}
{"asctime": "2026-01-19 22:23:13", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:54486 - \"PUT /api/doctor/sessions/13 HTTP/1.1\" 200", "timestamp": "2026-01-19T17:23:13.463353+00:00"}
{"asctime": "2026-01-19 22:23:13", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/doctor/sessions/13", "method": "PUT", "status_code": 200, "process_time": "29375.98ms", "client_ip": "127.0.0.1", "timestamp": "2026-01-19T17:23:13.469779+00:00"}
{"asctime": "2026-01-19 22:23:13", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:54485 - \"PUT /api/doctor/sessions/13 HTTP/1.1\" 200", "timestamp": "2026-01-19T17:23:13.470990+00:00"}
{"asctime": "2026-01-19 22:23:25", "levelname": "WARNING", "name": "root", "message": "Redis connection failed: Error 10061 connecting to localhost:6379. No connection could be made because the target machine actively refused it.. Using database fallback for account locking.", "timestamp": "2026-01-19T17:23:25.610282+00:00"}
{"asctime": "2026-01-19 22:23:25", "levelname": "WARNING", "name": "utils.evidence_cache", "message": "Evidence cache service initialized without Redis (caching disabled)", "timestamp": "2026-01-19T17:23:25.611910+00:00"}
{"asctime": "2026-01-19 22:23:25", "levelname": "INFO", "name": "root", "message": "Token blacklist initialized with database backend", "timestamp": "2026-01-19T17:23:25.942738+00:00"}
{"asctime": "2026-01-19 22:23:26", "levelname": "INFO", "name": "utils.cache_invalidation", "message": "Cache invalidation event listeners setup complete", "timestamp": "2026-01-19T17:23:26.246980+00:00"}
{"asctime": "2026-01-19 22:24:05", "levelname": "WARNING", "name": "root", "message": "Redis connection failed: Error 10061 connecting to localhost:6379. No connection could be made because the target machine actively refused it.. Using database fallback for account locking.", "timestamp": "2026-01-19T17:24:05.808594+00:00"}
{"asctime": "2026-01-19 22:24:05", "levelname": "WARNING", "name": "utils.evidence_cache", "message": "Evidence cache service initialized without Redis (caching disabled)", "timestamp": "2026-01-19T17:24:05.809837+00:00"}
{"asctime": "2026-01-19 22:24:06", "levelname": "INFO", "name": "root", "message": "Token blacklist initialized with database backend", "timestamp": "2026-01-19T17:24:06.005041+00:00"}
{"asctime": "2026-01-19 22:24:06", "levelname": "INFO", "name": "utils.cache_invalidation", "message": "Cache invalidation event listeners setup complete", "timestamp": "2026-01-19T17:24:06.214279+00:00"}
{"asctime": "2026-01-19 22:26:15", "levelname": "WARNING", "name": "root", "message": "Redis connection failed: Error 10061 connecting to localhost:6379. No connection could be made because the target machine actively refused it.. Using database fallback for account locking.", "timestamp": "2026-01-19T17:26:15.641208+00:00"}
{"asctime": "2026-01-19 22:26:15", "levelname": "WARNING", "name": "utils.evidence_cache", "message": "Evidence cache service initialized without Redis (caching disabled)", "timestamp": "2026-01-19T17:26:15.642614+00:00"}
{"asctime": "2026-01-19 22:26:15", "levelname": "INFO", "name": "root", "message": "Token blacklist initialized with database backend", "timestamp": "2026-01-19T17:26:15.893474+00:00"}
{"asctime": "2026-01-19 22:26:16", "levelname": "INFO", "name": "utils.cache_invalidation", "message": "Cache invalidation event listeners setup complete", "timestamp": "2026-01-19T17:26:16.118831+00:00"}
