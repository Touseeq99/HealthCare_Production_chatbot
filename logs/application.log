{"asctime": "2025-09-06 16:18:20", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/docs", "method": "GET", "status_code": 200, "process_time": "3.09ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:18:20.549691+00:00"}
{"asctime": "2025-09-06 16:18:20", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:59923 - \"GET /docs HTTP/1.1\" 200", "timestamp": "2025-09-06T11:18:20.559171+00:00"}
{"asctime": "2025-09-06 16:18:21", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/openapi.json", "method": "GET", "status_code": 200, "process_time": "37.63ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:18:21.978552+00:00"}
{"asctime": "2025-09-06 16:18:21", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:59923 - \"GET /openapi.json HTTP/1.1\" 200", "timestamp": "2025-09-06T11:18:21.980751+00:00"}
{"asctime": "2025-09-06 16:18:54", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T11:18:54.936027+00:00"}
{"asctime": "2025-09-06 16:18:54", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "2076.72ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:18:54.985733+00:00"}
{"asctime": "2025-09-06 16:18:54", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:58488 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T11:18:54.986578+00:00"}
{"asctime": "2025-09-06 16:20:48", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T11:20:48.115014+00:00"}
{"asctime": "2025-09-06 16:20:48", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "1674.96ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:20:48.192138+00:00"}
{"asctime": "2025-09-06 16:20:48", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:49558 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T11:20:48.193556+00:00"}
{"asctime": "2025-09-06 16:23:08", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T11:23:08.461420+00:00"}
{"asctime": "2025-09-06 16:23:14", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T11:23:14.741584+00:00"}
{"asctime": "2025-09-06 16:23:14", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "8004.40ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:23:14.755327+00:00"}
{"asctime": "2025-09-06 16:23:14", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:55568 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T11:23:14.756321+00:00"}
{"asctime": "2025-09-06 16:25:29", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T11:25:29.766114+00:00"}
{"asctime": "2025-09-06 16:25:37", "levelname": "INFO", "name": "utils.doctor_response", "message": "context:[{'id': 'doc_5', 'index': 5, 'score': 0.99698395, 'document': {'id': 'doc_5', 'text': 'medical record. 4.Consideration of stroke risk modi ﬁers: Patients with AF at intermediate to low ( <2%) annual risk of ischemic stroke can bene ﬁt from consideration of factors that might modify their risk of stroke, such asthe characteristics of their AF (eg, burden), non modi ﬁable risk factors (sex), and other dynamic or modi ﬁable factors (blood pressure control) that may inform shared decision making discussions. 5.Early rhythm control: With the emergence of new and consistent evidence, this guideline emphasizes theimportance of early and continued management ofpatients with AF that should focus on maintainingsinus rhythm and minimizing AF burden. 6.Catheter ablation of AF receives a Class 1 indication asﬁrst line therapy in selected patients: Recent randomized studies have dem onstrated the superior ity of catheter ablation over drug therapy for rhythmcontrol in appropriately selected patients. In view ofthe most recent evidence, we upgraded the Class ofRecommendation.'}}, {'id': 'doc_0', 'index': 0, 'score': 0.9716717, 'document': {'id': 'doc_0', 'text': 'dem onstrated the superior ity of catheter ablation over drug therapy for rhythmcontrol in appropriately selected patients. In view ofthe most recent evidence, we upgraded the Class ofRecommendation. 7.Catheter ablation of AF in appropriate patients with heart failure with reduced ejection fraction receives aClass 1 indication: Recent randomized studies have demonstrated the superiority of catheter ablation over drug therapy for rhythm control in patients withheart failure and reduced ejection failure. In view ofthe data, we upgraded the Class of Recommendationfor this population of patients. 8.Recommendations have been updated for device detected AF: In view of recent studies, more pre scriptive recommendations are provided for patients with device detected AF that consider the interaction between episode duration and the patient ’su n d e r l y ing risk for thromboembolism. This includes consid erations for patients with AF detected via implantabledevices and wearables. 9.Left'}}, {'id': 'doc_2', 'index': 2, 'score': 0.8517063, 'document': {'id': 'doc_2', 'text': 'rate control or anantiarrhythmic drug strategy. 3 13In each of 3 meta analyses, QOL was improved.3,10,13Although in the past a trial of antiarrhythmic drugs was advised beforepursuing catheter ablati on, current data support ablation for AF as ﬁrst line therapy even beforeantiarrhythmic drugs; often patients require both. Data on LVEF, hospitalizations, and mortality ratesare less robust, but nearly every larger RCT does showsome bene ﬁt in these outcomes ( Table 27 ). Charac teristics that may identify patients with a higher likelihood of success or failure with AF catheter ablation are listed in Figure 24 . 43 3 .D a t af o rA Fc a t h e t e ra b l a t i o na r ef a rl e s sr o b u s tf o r HFpEF. The largest analysis for this group of patientswas a subanalysis of the CABANA trial of patients withHF; in this subgroup analysis, 778 patients (35% of thestudy population) enrolled in the study who hadNYHA class II HF experienced improvement in sur vival, freedom from AF recurrence, and'}}]", "timestamp": "2025-09-06T11:25:37.085465+00:00"}
{"asctime": "2025-09-06 16:25:38", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T11:25:38.773302+00:00"}
{"asctime": "2025-09-06 16:25:38", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "11132.73ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:25:38.797406+00:00"}
{"asctime": "2025-09-06 16:25:38", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:65148 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T11:25:38.798174+00:00"}
{"asctime": "2025-09-06 16:31:07", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/auth/signup", "method": "OPTIONS", "status_code": 200, "process_time": "12.54ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:31:07.897970+00:00"}
{"asctime": "2025-09-06 16:31:07", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:61530 - \"OPTIONS /api/auth/signup HTTP/1.1\" 200", "timestamp": "2025-09-06T11:31:07.914901+00:00"}
{"asctime": "2025-09-06 16:31:13", "levelname": "WARNING", "name": "passlib.handlers.bcrypt", "message": "(trapped) error reading bcrypt version", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\passlib\\handlers\\bcrypt.py\", line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module 'bcrypt' has no attribute '__about__'", "timestamp": "2025-09-06T11:31:13.231237+00:00"}
{"asctime": "2025-09-06 16:31:15", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/auth/signup", "method": "POST", "status_code": 200, "process_time": "7950.85ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:31:15.877363+00:00"}
{"asctime": "2025-09-06 16:31:15", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:61530 - \"POST /api/auth/signup HTTP/1.1\" 200", "timestamp": "2025-09-06T11:31:15.878510+00:00"}
{"asctime": "2025-09-06 16:31:49", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "OPTIONS", "status_code": 200, "process_time": "0.49ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:31:49.302237+00:00"}
{"asctime": "2025-09-06 16:31:49", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:50060 - \"OPTIONS /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T11:31:49.303434+00:00"}
{"asctime": "2025-09-06 16:31:51", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T11:31:51.548832+00:00"}
{"asctime": "2025-09-06 16:32:00", "levelname": "INFO", "name": "utils.doctor_response", "message": "context:[{'id': 'doc_5', 'index': 5, 'score': 0.99698395, 'document': {'id': 'doc_5', 'text': 'medical record. 4.Consideration of stroke risk modi ﬁers: Patients with AF at intermediate to low ( <2%) annual risk of ischemic stroke can bene ﬁt from consideration of factors that might modify their risk of stroke, such asthe characteristics of their AF (eg, burden), non modi ﬁable risk factors (sex), and other dynamic or modi ﬁable factors (blood pressure control) that may inform shared decision making discussions. 5.Early rhythm control: With the emergence of new and consistent evidence, this guideline emphasizes theimportance of early and continued management ofpatients with AF that should focus on maintainingsinus rhythm and minimizing AF burden. 6.Catheter ablation of AF receives a Class 1 indication asﬁrst line therapy in selected patients: Recent randomized studies have dem onstrated the superior ity of catheter ablation over drug therapy for rhythmcontrol in appropriately selected patients. In view ofthe most recent evidence, we upgraded the Class ofRecommendation.'}}, {'id': 'doc_0', 'index': 0, 'score': 0.9716717, 'document': {'id': 'doc_0', 'text': 'dem onstrated the superior ity of catheter ablation over drug therapy for rhythmcontrol in appropriately selected patients. In view ofthe most recent evidence, we upgraded the Class ofRecommendation. 7.Catheter ablation of AF in appropriate patients with heart failure with reduced ejection fraction receives aClass 1 indication: Recent randomized studies have demonstrated the superiority of catheter ablation over drug therapy for rhythm control in patients withheart failure and reduced ejection failure. In view ofthe data, we upgraded the Class of Recommendationfor this population of patients. 8.Recommendations have been updated for device detected AF: In view of recent studies, more pre scriptive recommendations are provided for patients with device detected AF that consider the interaction between episode duration and the patient ’su n d e r l y ing risk for thromboembolism. This includes consid erations for patients with AF detected via implantabledevices and wearables. 9.Left'}}, {'id': 'doc_2', 'index': 2, 'score': 0.8517063, 'document': {'id': 'doc_2', 'text': 'rate control or anantiarrhythmic drug strategy. 3 13In each of 3 meta analyses, QOL was improved.3,10,13Although in the past a trial of antiarrhythmic drugs was advised beforepursuing catheter ablati on, current data support ablation for AF as ﬁrst line therapy even beforeantiarrhythmic drugs; often patients require both. Data on LVEF, hospitalizations, and mortality ratesare less robust, but nearly every larger RCT does showsome bene ﬁt in these outcomes ( Table 27 ). Charac teristics that may identify patients with a higher likelihood of success or failure with AF catheter ablation are listed in Figure 24 . 43 3 .D a t af o rA Fc a t h e t e ra b l a t i o na r ef a rl e s sr o b u s tf o r HFpEF. The largest analysis for this group of patientswas a subanalysis of the CABANA trial of patients withHF; in this subgroup analysis, 778 patients (35% of thestudy population) enrolled in the study who hadNYHA class II HF experienced improvement in sur vival, freedom from AF recurrence, and'}}]", "timestamp": "2025-09-06T11:32:00.900280+00:00"}
{"asctime": "2025-09-06 16:32:02", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T11:32:02.182301+00:00"}
{"asctime": "2025-09-06 16:32:02", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "12882.10ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:32:02.192768+00:00"}
{"asctime": "2025-09-06 16:32:02", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:50060 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T11:32:02.194656+00:00"}
{"asctime": "2025-09-06 16:49:01", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "OPTIONS", "status_code": 200, "process_time": "16.30ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:49:01.302778+00:00"}
{"asctime": "2025-09-06 16:49:01", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:58041 - \"OPTIONS /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T11:49:01.335050+00:00"}
{"asctime": "2025-09-06 16:49:03", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T11:49:03.833440+00:00"}
{"asctime": "2025-09-06 16:49:12", "levelname": "INFO", "name": "utils.doctor_response", "message": "context:[{'id': 'doc_5', 'index': 5, 'score': 0.99698395, 'document': {'id': 'doc_5', 'text': 'medical record. 4.Consideration of stroke risk modi ﬁers: Patients with AF at intermediate to low ( <2%) annual risk of ischemic stroke can bene ﬁt from consideration of factors that might modify their risk of stroke, such asthe characteristics of their AF (eg, burden), non modi ﬁable risk factors (sex), and other dynamic or modi ﬁable factors (blood pressure control) that may inform shared decision making discussions. 5.Early rhythm control: With the emergence of new and consistent evidence, this guideline emphasizes theimportance of early and continued management ofpatients with AF that should focus on maintainingsinus rhythm and minimizing AF burden. 6.Catheter ablation of AF receives a Class 1 indication asﬁrst line therapy in selected patients: Recent randomized studies have dem onstrated the superior ity of catheter ablation over drug therapy for rhythmcontrol in appropriately selected patients. In view ofthe most recent evidence, we upgraded the Class ofRecommendation.'}}, {'id': 'doc_0', 'index': 0, 'score': 0.9716717, 'document': {'id': 'doc_0', 'text': 'dem onstrated the superior ity of catheter ablation over drug therapy for rhythmcontrol in appropriately selected patients. In view ofthe most recent evidence, we upgraded the Class ofRecommendation. 7.Catheter ablation of AF in appropriate patients with heart failure with reduced ejection fraction receives aClass 1 indication: Recent randomized studies have demonstrated the superiority of catheter ablation over drug therapy for rhythm control in patients withheart failure and reduced ejection failure. In view ofthe data, we upgraded the Class of Recommendationfor this population of patients. 8.Recommendations have been updated for device detected AF: In view of recent studies, more pre scriptive recommendations are provided for patients with device detected AF that consider the interaction between episode duration and the patient ’su n d e r l y ing risk for thromboembolism. This includes consid erations for patients with AF detected via implantabledevices and wearables. 9.Left'}}, {'id': 'doc_2', 'index': 2, 'score': 0.8517063, 'document': {'id': 'doc_2', 'text': 'rate control or anantiarrhythmic drug strategy. 3 13In each of 3 meta analyses, QOL was improved.3,10,13Although in the past a trial of antiarrhythmic drugs was advised beforepursuing catheter ablati on, current data support ablation for AF as ﬁrst line therapy even beforeantiarrhythmic drugs; often patients require both. Data on LVEF, hospitalizations, and mortality ratesare less robust, but nearly every larger RCT does showsome bene ﬁt in these outcomes ( Table 27 ). Charac teristics that may identify patients with a higher likelihood of success or failure with AF catheter ablation are listed in Figure 24 . 43 3 .D a t af o rA Fc a t h e t e ra b l a t i o na r ef a rl e s sr o b u s tf o r HFpEF. The largest analysis for this group of patientswas a subanalysis of the CABANA trial of patients withHF; in this subgroup analysis, 778 patients (35% of thestudy population) enrolled in the study who hadNYHA class II HF experienced improvement in sur vival, freedom from AF recurrence, and'}}]", "timestamp": "2025-09-06T11:49:12.076874+00:00"}
{"asctime": "2025-09-06 16:49:13", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T11:49:13.059962+00:00"}
{"asctime": "2025-09-06 16:49:13", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "11894.96ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:49:13.250204+00:00"}
{"asctime": "2025-09-06 16:49:13", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:58041 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T11:49:13.253703+00:00"}
{"asctime": "2025-09-06 16:58:16", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T11:58:16.781933+00:00"}
{"asctime": "2025-09-06 16:58:25", "levelname": "INFO", "name": "utils.doctor_response", "message": "context:[{'id': 'doc_5', 'index': 5, 'score': 0.99698395, 'document': {'id': 'doc_5', 'text': 'medical record. 4.Consideration of stroke risk modi ﬁers: Patients with AF at intermediate to low ( <2%) annual risk of ischemic stroke can bene ﬁt from consideration of factors that might modify their risk of stroke, such asthe characteristics of their AF (eg, burden), non modi ﬁable risk factors (sex), and other dynamic or modi ﬁable factors (blood pressure control) that may inform shared decision making discussions. 5.Early rhythm control: With the emergence of new and consistent evidence, this guideline emphasizes theimportance of early and continued management ofpatients with AF that should focus on maintainingsinus rhythm and minimizing AF burden. 6.Catheter ablation of AF receives a Class 1 indication asﬁrst line therapy in selected patients: Recent randomized studies have dem onstrated the superior ity of catheter ablation over drug therapy for rhythmcontrol in appropriately selected patients. In view ofthe most recent evidence, we upgraded the Class ofRecommendation.'}}, {'id': 'doc_0', 'index': 0, 'score': 0.9716717, 'document': {'id': 'doc_0', 'text': 'dem onstrated the superior ity of catheter ablation over drug therapy for rhythmcontrol in appropriately selected patients. In view ofthe most recent evidence, we upgraded the Class ofRecommendation. 7.Catheter ablation of AF in appropriate patients with heart failure with reduced ejection fraction receives aClass 1 indication: Recent randomized studies have demonstrated the superiority of catheter ablation over drug therapy for rhythm control in patients withheart failure and reduced ejection failure. In view ofthe data, we upgraded the Class of Recommendationfor this population of patients. 8.Recommendations have been updated for device detected AF: In view of recent studies, more pre scriptive recommendations are provided for patients with device detected AF that consider the interaction between episode duration and the patient ’su n d e r l y ing risk for thromboembolism. This includes consid erations for patients with AF detected via implantabledevices and wearables. 9.Left'}}, {'id': 'doc_2', 'index': 2, 'score': 0.8517063, 'document': {'id': 'doc_2', 'text': 'rate control or anantiarrhythmic drug strategy. 3 13In each of 3 meta analyses, QOL was improved.3,10,13Although in the past a trial of antiarrhythmic drugs was advised beforepursuing catheter ablati on, current data support ablation for AF as ﬁrst line therapy even beforeantiarrhythmic drugs; often patients require both. Data on LVEF, hospitalizations, and mortality ratesare less robust, but nearly every larger RCT does showsome bene ﬁt in these outcomes ( Table 27 ). Charac teristics that may identify patients with a higher likelihood of success or failure with AF catheter ablation are listed in Figure 24 . 43 3 .D a t af o rA Fc a t h e t e ra b l a t i o na r ef a rl e s sr o b u s tf o r HFpEF. The largest analysis for this group of patientswas a subanalysis of the CABANA trial of patients withHF; in this subgroup analysis, 778 patients (35% of thestudy population) enrolled in the study who hadNYHA class II HF experienced improvement in sur vival, freedom from AF recurrence, and'}}]", "timestamp": "2025-09-06T11:58:25.188489+00:00"}
{"asctime": "2025-09-06 16:58:26", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T11:58:26.342344+00:00"}
{"asctime": "2025-09-06 16:58:26", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "11676.81ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T11:58:26.651483+00:00"}
{"asctime": "2025-09-06 16:58:26", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:58346 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T11:58:26.652530+00:00"}
{"asctime": "2025-09-06 17:02:17", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "OPTIONS", "status_code": 200, "process_time": "10.19ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:02:17.228682+00:00"}
{"asctime": "2025-09-06 17:02:17", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:54682 - \"OPTIONS /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T12:02:17.238683+00:00"}
{"asctime": "2025-09-06 17:02:18", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T12:02:18.619584+00:00"}
{"asctime": "2025-09-06 17:02:25", "levelname": "INFO", "name": "utils.doctor_response", "message": "context:[{'id': 'doc_5', 'index': 5, 'score': 0.99698395, 'document': {'id': 'doc_5', 'text': 'medical record. 4.Consideration of stroke risk modi ﬁers: Patients with AF at intermediate to low ( <2%) annual risk of ischemic stroke can bene ﬁt from consideration of factors that might modify their risk of stroke, such asthe characteristics of their AF (eg, burden), non modi ﬁable risk factors (sex), and other dynamic or modi ﬁable factors (blood pressure control) that may inform shared decision making discussions. 5.Early rhythm control: With the emergence of new and consistent evidence, this guideline emphasizes theimportance of early and continued management ofpatients with AF that should focus on maintainingsinus rhythm and minimizing AF burden. 6.Catheter ablation of AF receives a Class 1 indication asﬁrst line therapy in selected patients: Recent randomized studies have dem onstrated the superior ity of catheter ablation over drug therapy for rhythmcontrol in appropriately selected patients. In view ofthe most recent evidence, we upgraded the Class ofRecommendation.'}}, {'id': 'doc_0', 'index': 0, 'score': 0.9716717, 'document': {'id': 'doc_0', 'text': 'dem onstrated the superior ity of catheter ablation over drug therapy for rhythmcontrol in appropriately selected patients. In view ofthe most recent evidence, we upgraded the Class ofRecommendation. 7.Catheter ablation of AF in appropriate patients with heart failure with reduced ejection fraction receives aClass 1 indication: Recent randomized studies have demonstrated the superiority of catheter ablation over drug therapy for rhythm control in patients withheart failure and reduced ejection failure. In view ofthe data, we upgraded the Class of Recommendationfor this population of patients. 8.Recommendations have been updated for device detected AF: In view of recent studies, more pre scriptive recommendations are provided for patients with device detected AF that consider the interaction between episode duration and the patient ’su n d e r l y ing risk for thromboembolism. This includes consid erations for patients with AF detected via implantabledevices and wearables. 9.Left'}}, {'id': 'doc_2', 'index': 2, 'score': 0.8517063, 'document': {'id': 'doc_2', 'text': 'rate control or anantiarrhythmic drug strategy. 3 13In each of 3 meta analyses, QOL was improved.3,10,13Although in the past a trial of antiarrhythmic drugs was advised beforepursuing catheter ablati on, current data support ablation for AF as ﬁrst line therapy even beforeantiarrhythmic drugs; often patients require both. Data on LVEF, hospitalizations, and mortality ratesare less robust, but nearly every larger RCT does showsome bene ﬁt in these outcomes ( Table 27 ). Charac teristics that may identify patients with a higher likelihood of success or failure with AF catheter ablation are listed in Figure 24 . 43 3 .D a t af o rA Fc a t h e t e ra b l a t i o na r ef a rl e s sr o b u s tf o r HFpEF. The largest analysis for this group of patientswas a subanalysis of the CABANA trial of patients withHF; in this subgroup analysis, 778 patients (35% of thestudy population) enrolled in the study who hadNYHA class II HF experienced improvement in sur vival, freedom from AF recurrence, and'}}]", "timestamp": "2025-09-06T12:02:25.705096+00:00"}
{"asctime": "2025-09-06 17:02:26", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T12:02:26.683233+00:00"}
{"asctime": "2025-09-06 17:02:26", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "9600.03ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:02:26.847044+00:00"}
{"asctime": "2025-09-06 17:02:26", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:54682 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T12:02:26.848173+00:00"}
{"asctime": "2025-09-06 17:22:49", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "OPTIONS", "status_code": 200, "process_time": "6.44ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:22:49.749340+00:00"}
{"asctime": "2025-09-06 17:22:49", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:55633 - \"OPTIONS /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T12:22:49.766775+00:00"}
{"asctime": "2025-09-06 17:22:52", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T12:22:52.300861+00:00"}
{"asctime": "2025-09-06 17:23:00", "levelname": "INFO", "name": "utils.doctor_response", "message": "context:[{'id': 'doc_0', 'index': 0, 'score': 0.99869555, 'document': {'id': 'doc_0', 'text': '<30 mL/min/1.73 m 2) Drug interactions P glycoprotein inducers or inhibitors CYP3A4 inducers or inhibitors AF indicates atrial ﬁbrillation; eGFR, estimated glomerular ﬁltration rate; and HAS BLED, hypertension, abnormal renal/liver function, stroke, bleeding history or predis position, labile international normalized ratio (INR), elderly (age $65 years), drugs/ alcohol concomitantly). Recommendations for Anticoagulation Use in Patients With Liver Disease Referenced studies that support the recommendations are summarized in the Online Data Supplement . COR LOE RECOMMENDATIONS 2a B NR1. For patients with AF who are at increased risk of sy stemic thromboembolism and mild or moderate liver disease (Child Pugh class A or B), OAC therapy is reasonable in the absence of clinically signi ﬁcant liver disease –induced coagulopathy or thrombocytopenia.1 7 2a B NR2. For patients with AF who are at increased risk of sy stemic thromboembolism and mild or moderate liver disease (Child Pugh class A'}}, {'id': 'doc_1', 'index': 1, 'score': 0.99835795, 'document': {'id': 'doc_1', 'text': 'disease –induced coagulopathy or thrombocytopenia.1 7 2a B NR2. For patients with AF who are at increased risk of sy stemic thromboembolism and mild or moderate liver disease (Child Pugh class A or B) and who are dee med to be candidates for anticoagulation, it is reasonable to prescribe DOACs (Child Pugh class A: a ny DOAC; Child Pugh class B: apixaban, dabigatran, or edoxaban) over warfarin.1,7 11 3: Harm C LD3. For patients with AF and moderate liver disease (C hild Pugh class B) at increased risk of systemic thromboembolism, rivaroxaban is contraindicated d ue to the potentially incr eased risk of bleeding.12 Child Pugh scoring: the severity of liver disease, primarily cirrhosis in patients with diagnosed liver disease. Child Pugh A (mild): 5 6 points; Child Pugh B (moderate): 7 9 points; Child Pugh C (severe): 10 15 points. The score is based on the 5 variables: encephalopathy (none ¼1 point, grade 1 and 2 ¼2 points, grade 3 and 4 ¼3 points); ascites (none ¼1 point, slight ¼2'}}, {'id': 'doc_2', 'index': 2, 'score': 0.99762183, 'document': {'id': 'doc_2', 'text': 'exclusively mild to moderateliver disease (Child Pugh class A B), but DOAC usewas associated with lower risks of major bleeding (OR,0.54 [95% CI, 0.38 0.75]; P¼0.0003) and ICH (OR, 0.35 [95% CI, 0.23 0.53]; P<0.0001) compared with the warfarin group. 7Another meta analysis showed that, in patients with exclusively mild to moderate cirrhosis(Child Pugh score A B), DOAC use was associated withlower risks of ischemic stroke (HR, 0.62 [95% CI, 0.10 0.90]), major bleeding (HR, 0.64 [95% CI, 0.57 0.72]), orICH (HR, 0.49 [95% CI, 0.40 0.59]) compared withwarfarin. 11DOACs are reasonable oral anticoagulation agents in patients with AF an d mild to moderate liver disease (Child Pugh class A B). However, data onDOACs are lacking on patients with AF and severe liverdisease (Child Pugh class C). 3. Rivaroxaban is currently avoided in patients with moderate liver disease (Child Pugh class B). Rivarox aban AUC signi ﬁcantly increased by 2.27 fold after a single dose of rivaroxaban 10 mg in patients'}}]", "timestamp": "2025-09-06T12:23:00.110331+00:00"}
{"asctime": "2025-09-06 17:23:05", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T12:23:05.446972+00:00"}
{"asctime": "2025-09-06 17:23:05", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "15830.15ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:23:05.607791+00:00"}
{"asctime": "2025-09-06 17:23:05", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:55633 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T12:23:05.608653+00:00"}
{"asctime": "2025-09-06 17:43:49", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "OPTIONS", "status_code": 200, "process_time": "7.48ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:43:49.522447+00:00"}
{"asctime": "2025-09-06 17:43:49", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:61552 - \"OPTIONS /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T12:43:49.539437+00:00"}
{"asctime": "2025-09-06 17:43:52", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T12:43:52.063936+00:00"}
{"asctime": "2025-09-06 17:44:00", "levelname": "INFO", "name": "utils.doctor_response", "message": "context:[{'id': 'doc_1', 'index': 1, 'score': 0.938576, 'document': {'id': 'doc_1', 'text': 'may also apply. The gray area indicates doses not studied in the pivotal clinical trials of these agents. If at least 2 of the following are present: serum creatinine $1.5 mg/dL, age $80 y, or body weight #60 kg, the recommended dose is 2.5 mg twice daily. The ARISTOTLE trial excluded pa tients with either a creatinine of >2.5 mg/dL or a calculated CrCl <25 mL/min. †Rivaroxaban is not recommended for other indications in patients with a CrCl <15 mL/min, but such a recommendation is not made for the AF indication. However, pharmacokinetic data are limited. AF indicates atrial ﬁbrillation; ARISTOTLE, Apixaban for Reduction in Stroke and Other Throm boembolic Events in Atrial Fibrillation; CrCl, creatinine clearance; and DOAC, direct oral anticoagulant.JACC VOL. 83, NO. 1, 2024 Joglar et al JANUARY 2/9, 2024:109 –279 2023 Guideline for the Diagnosis and Management of Atrial Fibrillation169 largely observational. A prospective, multicenter cohort study of survivors of MI with AF found'}}, {'id': 'doc_0', 'index': 0, 'score': 0.8508408, 'document': {'id': 'doc_0', 'text': 'asseen in patients with normal kidney function. 2 2. Evidence on the use of anticoagulation in patients with A Fa n ds t a g e4C K D( e G F R ,1 5 3 0m L / m i n / 1 . 7 3m2)i s TABLE 19Recommended Doses of Currently Approved DOACs According to Renal Function DOACCrCl (mL/min) >95 51 95 31 50 15 30<15 or on dialysis Apixaban 5 or 2.5 mg twice daily 5 or 2.5 mg twice daily 5 or 2.5 mg twice daily 5 or 2.5 mg twice daily 5 or 2.5 mg twice daily Dabigatran 150 mg twice daily150 mg twice daily150 mg twice daily75 mg twice dailyContraindicated Edoxaban Contraindicated 60 mg once daily30 mg once daily30 mg once dailyContraindicated Rivaroxaban 20 mg once daily20 mg once daily15 mg once daily15 mg once daily15 mg once daily † Note that other, nonrenal considerations such as drug interactions may also apply. The gray area indicates doses not studied in the pivotal clinical trials of these agents. If at least 2 of the following are present: serum creatinine $1.5 mg/dL, age $80 y, or body'}}, {'id': 'doc_2', 'index': 2, 'score': 0.7478002, 'document': {'id': 'doc_2', 'text': 'in patients with AF and severe CKD, including those on dialysis, is controver sial. 6,7,21,22P e n d i n gt h er e s u l t so fR C T sc o m p a r i n g warfarin with no treatment, and warfarin with DOACs,SDM incorporating risks of bleeding and thromboem bolism is encouraged. The pivotal clinical trials ofapixaban excluded patients with CrCl <25 mL/min. 23,24 Subsequently, the FDA approved labeling was extended to include those wi th end stage renal failure,including those on hemodialysis.25As u b s e q u e n t pharmacokinetic study found that drug levels withapixaban 2.5 mg twice daily approximate those seenwith 5 mg twice daily in patients with normal renalfunction, suggesting 2.5 mg is a more appropriate dose in such patients. 26A large retrospective cohort study of Medicare bene ﬁciaries found no difference in throm boembolism, but less major bleeding, in patientst r e a t e dw i t ha p i x a b a nv e r s u sw a r f a r i n . 27Another analysis found an increased risk of'}}]", "timestamp": "2025-09-06T12:44:00.416610+00:00"}
{"asctime": "2025-09-06 17:44:02", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T12:44:02.293185+00:00"}
{"asctime": "2025-09-06 17:44:02", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "12843.43ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:44:02.399320+00:00"}
{"asctime": "2025-09-06 17:44:02", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:61552 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T12:44:02.405352+00:00"}
{"asctime": "2025-09-06 17:54:18", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "OPTIONS", "status_code": 200, "process_time": "4.00ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:54:18.822165+00:00"}
{"asctime": "2025-09-06 17:54:18", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:49480 - \"OPTIONS /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T12:54:18.832088+00:00"}
{"asctime": "2025-09-06 17:54:20", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T12:54:20.748364+00:00"}
{"asctime": "2025-09-06 17:54:28", "levelname": "INFO", "name": "utils.doctor_response", "message": "context:[{'id': 'doc_0', 'index': 0, 'score': 0.9716717, 'document': {'id': 'doc_0', 'text': 'dem onstrated the superior ity of catheter ablation over drug therapy for rhythmcontrol in appropriately selected patients. In view ofthe most recent evidence, we upgraded the Class ofRecommendation. 7.Catheter ablation of AF in appropriate patients with heart failure with reduced ejection fraction receives aClass 1 indication: Recent randomized studies have demonstrated the superiority of catheter ablation over drug therapy for rhythm control in patients withheart failure and reduced ejection failure. In view ofthe data, we upgraded the Class of Recommendationfor this population of patients. 8.Recommendations have been updated for device detected AF: In view of recent studies, more pre scriptive recommendations are provided for patients with device detected AF that consider the interaction between episode duration and the patient ’su n d e r l y ing risk for thromboembolism. This includes consid erations for patients with AF detected via implantabledevices and wearables. 9.Left'}}, {'id': 'doc_1', 'index': 1, 'score': 0.8512122, 'document': {'id': 'doc_1', 'text': 'rate control or anantiarrhythmic drug strategy. 3 13In each of 3 meta analyses, QOL was improved.3,10,13Although in the past a trial of antiarrhythmic drugs was advised beforepursuing catheter ablati on, current data support ablation for AF as ﬁrst line therapy even beforeantiarrhythmic drugs; often patients require both. Data on LVEF, hospitalizations, and mortality ratesare less robust, but nearly every larger RCT does showsome bene ﬁt in these outcomes ( Table 27 ). Charac teristics that may identify patients with a higher likelihood of success or failure with AF catheter ablation are listed in Figure 24 . 43 3 .D a t af o rA Fc a t h e t e ra b l a t i o na r ef a rl e s sr o b u s tf o r HFpEF. The largest analysis for this group of patientswas a subanalysis of the CABANA trial of patients withHF; in this subgroup analysis, 778 patients (35% of thestudy population) enrolled in the study who hadNYHA class II HF experienced improvement in sur vival, freedom from AF recurrence, and'}}, {'id': 'doc_5', 'index': 5, 'score': 0.7761143, 'document': {'id': 'doc_5', 'text': 'termediate economic value compared with antiar rhythmic drug therapy.29,30 2b B NR7. In selected patients with asymptomatic or minimally symptomatic AF, catheter ablation may be useful for reducing progression of AF and its associated complications.31 39 Younger patients with few comorbidities and a moderate to high burden of AF or persistent AF and AFL. Synopsis Catheter ablation has becom e an established therapy for AF because of multiple RCTs and evidence from largeregistries and continues to evolve as new technologies aredeveloped. Previous professional society documents haveprovided different recommendations for catheter ablation dependent on whether AF was persistent or parox ysmal. 25,40More recent information has shown that abla tion for AF is more effective than antiarrhythmic drugs forboth persistent and paroxysmal AF and that earlierJACC VOL. 83, NO. 1, 2024 Joglar et al JANUARY 2/9, 2024:109 –279 2023 Guideline for the Diagnosis and Management of Atrial Fibrillation201'}}]", "timestamp": "2025-09-06T12:54:28.049472+00:00"}
{"asctime": "2025-09-06 17:54:29", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T12:54:29.917084+00:00"}
{"asctime": "2025-09-06 17:54:30", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "11326.28ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:54:30.171425+00:00"}
{"asctime": "2025-09-06 17:54:30", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:49480 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T12:54:30.178342+00:00"}
{"asctime": "2025-09-06 17:56:11", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/auth/login", "method": "OPTIONS", "status_code": 200, "process_time": "1.07ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:56:11.052914+00:00"}
{"asctime": "2025-09-06 17:56:11", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:51371 - \"OPTIONS /api/auth/login HTTP/1.1\" 200", "timestamp": "2025-09-06T12:56:11.055447+00:00"}
{"asctime": "2025-09-06 17:56:19", "levelname": "WARNING", "name": "passlib.handlers.bcrypt", "message": "(trapped) error reading bcrypt version", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\passlib\\handlers\\bcrypt.py\", line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module 'bcrypt' has no attribute '__about__'", "timestamp": "2025-09-06T12:56:19.511574+00:00"}
{"asctime": "2025-09-06 17:56:20", "levelname": "INFO", "name": "root", "message": "User logged in successfully", "email": "touseeqahmed2343@gmail.com", "role": "admin", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:56:20.547101+00:00"}
{"asctime": "2025-09-06 17:56:20", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/auth/login", "method": "POST", "status_code": 200, "process_time": "9772.66ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:56:20.835486+00:00"}
{"asctime": "2025-09-06 17:56:20", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:60846 - \"POST /api/auth/login HTTP/1.1\" 200", "timestamp": "2025-09-06T12:56:20.836437+00:00"}
{"asctime": "2025-09-06 17:56:27", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/admin/users", "method": "GET", "status_code": 200, "process_time": "4693.41ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:56:27.170953+00:00"}
{"asctime": "2025-09-06 17:56:27", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:63220 - \"GET /api/admin/users HTTP/1.1\" 200", "timestamp": "2025-09-06T12:56:27.171749+00:00"}
{"asctime": "2025-09-06 17:56:28", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/admin/articles", "method": "GET", "status_code": 200, "process_time": "4454.06ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:56:28.599981+00:00"}
{"asctime": "2025-09-06 17:56:28", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:61273 - \"GET /api/admin/articles HTTP/1.1\" 200", "timestamp": "2025-09-06T12:56:28.600866+00:00"}
{"asctime": "2025-09-06 17:56:29", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/admin/users", "method": "GET", "status_code": 200, "process_time": "2048.09ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:56:29.224670+00:00"}
{"asctime": "2025-09-06 17:56:29", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:63220 - \"GET /api/admin/users HTTP/1.1\" 200", "timestamp": "2025-09-06T12:56:29.225549+00:00"}
{"asctime": "2025-09-06 17:56:29", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/admin/articles", "method": "GET", "status_code": 200, "process_time": "965.12ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T12:56:29.574752+00:00"}
{"asctime": "2025-09-06 17:56:29", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:61273 - \"GET /api/admin/articles HTTP/1.1\" 200", "timestamp": "2025-09-06T12:56:29.575655+00:00"}
{"asctime": "2025-09-06 18:04:09", "levelname": "INFO", "name": "root", "message": "User logged in successfully", "email": "alianahmed318@gmail.com", "role": "patient", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T13:04:09.365843+00:00"}
{"asctime": "2025-09-06 18:04:09", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/auth/login", "method": "POST", "status_code": 200, "process_time": "4251.39ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T13:04:09.860611+00:00"}
{"asctime": "2025-09-06 18:04:09", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:60113 - \"POST /api/auth/login HTTP/1.1\" 200", "timestamp": "2025-09-06T13:04:09.864297+00:00"}
{"asctime": "2025-09-06 18:04:26", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/admin/articles", "method": "GET", "status_code": 200, "process_time": "911.20ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T13:04:26.598221+00:00"}
{"asctime": "2025-09-06 18:04:26", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:63492 - \"GET /api/admin/articles HTTP/1.1\" 200", "timestamp": "2025-09-06T13:04:26.602417+00:00"}
{"asctime": "2025-09-06 18:04:27", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/admin/articles", "method": "GET", "status_code": 200, "process_time": "889.29ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T13:04:27.500709+00:00"}
{"asctime": "2025-09-06 18:04:27", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:63492 - \"GET /api/admin/articles HTTP/1.1\" 200", "timestamp": "2025-09-06T13:04:27.501909+00:00"}
{"asctime": "2025-09-06 18:06:38", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/patient/stream", "method": "OPTIONS", "status_code": 200, "process_time": "1.41ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T13:06:38.958693+00:00"}
{"asctime": "2025-09-06 18:06:38", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:63852 - \"OPTIONS /api/chat/patient/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T13:06:38.959938+00:00"}
{"asctime": "2025-09-06 18:06:40", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T13:06:40.113576+00:00"}
{"asctime": "2025-09-06 18:06:40", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/patient/stream", "method": "POST", "status_code": 200, "process_time": "1185.79ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T13:06:40.151844+00:00"}
{"asctime": "2025-09-06 18:06:40", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:63852 - \"POST /api/chat/patient/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T13:06:40.154236+00:00"}
{"asctime": "2025-09-06 18:07:17", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T13:07:17.779848+00:00"}
{"asctime": "2025-09-06 18:07:17", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/patient/stream", "method": "POST", "status_code": 200, "process_time": "1889.80ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T13:07:17.888426+00:00"}
{"asctime": "2025-09-06 18:07:17", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:52527 - \"POST /api/chat/patient/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T13:07:17.891441+00:00"}
{"asctime": "2025-09-06 18:12:51", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T13:12:51.929388+00:00"}
{"asctime": "2025-09-06 18:12:51", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/patient/stream", "method": "POST", "status_code": 200, "process_time": "1670.85ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T13:12:51.936982+00:00"}
{"asctime": "2025-09-06 18:12:51", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:52077 - \"POST /api/chat/patient/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T13:12:51.937592+00:00"}
{"asctime": "2025-09-06 18:14:04", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/auth/login", "method": "OPTIONS", "status_code": 200, "process_time": "7.88ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T13:14:04.591413+00:00"}
{"asctime": "2025-09-06 18:14:04", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:51351 - \"OPTIONS /api/auth/login HTTP/1.1\" 200", "timestamp": "2025-09-06T13:14:04.593446+00:00"}
{"asctime": "2025-09-06 18:14:13", "levelname": "WARNING", "name": "passlib.handlers.bcrypt", "message": "(trapped) error reading bcrypt version", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\passlib\\handlers\\bcrypt.py\", line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module 'bcrypt' has no attribute '__about__'", "timestamp": "2025-09-06T13:14:13.953884+00:00"}
{"asctime": "2025-09-06 18:14:14", "levelname": "INFO", "name": "root", "message": "User logged in successfully", "email": "testingaccount@gmail.com", "role": "doctor", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T13:14:14.894313+00:00"}
{"asctime": "2025-09-06 18:14:15", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/auth/login", "method": "POST", "status_code": 200, "process_time": "10542.96ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T13:14:15.144702+00:00"}
{"asctime": "2025-09-06 18:14:15", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:53279 - \"POST /api/auth/login HTTP/1.1\" 200", "timestamp": "2025-09-06T13:14:15.145156+00:00"}
{"asctime": "2025-09-06 19:29:48", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/auth/login", "method": "OPTIONS", "status_code": 200, "process_time": "34.20ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T14:29:48.089190+00:00"}
{"asctime": "2025-09-06 19:29:48", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:59318 - \"OPTIONS /api/auth/login HTTP/1.1\" 200", "timestamp": "2025-09-06T14:29:48.119375+00:00"}
{"asctime": "2025-09-06 19:29:56", "levelname": "ERROR", "name": "root", "message": "Login error", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.UndefinedColumn: column users.license_number does not exist\nLINE 1: ...ne, users.specialization AS users_specialization, users.lice...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\api\\auth.py\", line 245, in login_for_access_token\n    user = authenticate_user(db, login_data.email, login_data.password, login_data.role)\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\api\\auth.py\", line 123, in authenticate_user\n    user = db.query(User).filter(User.email == email, User.role == role).first()\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.license_number does not exist\nLINE 1: ...ne, users.specialization AS users_specialization, users.lice...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.role AS users_role, users.name AS users_name, users.surname AS users_surname, users.phone AS users_phone, users.specialization AS users_specialization, users.license_number AS users_license_number, users.doctor_register_number AS users_doctor_register_number, users.hashed_password AS users_hashed_password, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.email = %(email_1)s AND users.role = %(role_1)s \n LIMIT %(param_1)s]\n[parameters: {'email_1': 'testingaccount@gmail.com', 'role_1': '', 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "error": "(psycopg2.errors.UndefinedColumn) column users.license_number does not exist\nLINE 1: ...ne, users.specialization AS users_specialization, users.lice...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.role AS users_role, users.name AS users_name, users.surname AS users_surname, users.phone AS users_phone, users.specialization AS users_specialization, users.license_number AS users_license_number, users.doctor_register_number AS users_doctor_register_number, users.hashed_password AS users_hashed_password, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.email = %(email_1)s AND users.role = %(role_1)s \n LIMIT %(param_1)s]\n[parameters: {'email_1': 'testingaccount@gmail.com', 'role_1': '', 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "email": "testingaccount@gmail.com", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T14:29:56.981670+00:00"}
{"asctime": "2025-09-06 19:29:57", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/auth/login", "method": "POST", "status_code": 500, "process_time": "9484.92ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T14:29:57.629660+00:00"}
{"asctime": "2025-09-06 19:29:57", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:55023 - \"POST /api/auth/login HTTP/1.1\" 500", "timestamp": "2025-09-06T14:29:57.630945+00:00"}
{"asctime": "2025-09-06 19:31:03", "levelname": "ERROR", "name": "root", "message": "Login error", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.UndefinedColumn: column users.license_number does not exist\nLINE 1: ...ne, users.specialization AS users_specialization, users.lice...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\api\\auth.py\", line 245, in login_for_access_token\n    user = authenticate_user(db, login_data.email, login_data.password, login_data.role)\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\api\\auth.py\", line 123, in authenticate_user\n    user = db.query(User).filter(User.email == email, User.role == role).first()\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.license_number does not exist\nLINE 1: ...ne, users.specialization AS users_specialization, users.lice...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.role AS users_role, users.name AS users_name, users.surname AS users_surname, users.phone AS users_phone, users.specialization AS users_specialization, users.license_number AS users_license_number, users.doctor_register_number AS users_doctor_register_number, users.hashed_password AS users_hashed_password, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.email = %(email_1)s AND users.role = %(role_1)s \n LIMIT %(param_1)s]\n[parameters: {'email_1': 'testingaccount@gmail.com', 'role_1': 'doctor', 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "error": "(psycopg2.errors.UndefinedColumn) column users.license_number does not exist\nLINE 1: ...ne, users.specialization AS users_specialization, users.lice...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.role AS users_role, users.name AS users_name, users.surname AS users_surname, users.phone AS users_phone, users.specialization AS users_specialization, users.license_number AS users_license_number, users.doctor_register_number AS users_doctor_register_number, users.hashed_password AS users_hashed_password, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.email = %(email_1)s AND users.role = %(role_1)s \n LIMIT %(param_1)s]\n[parameters: {'email_1': 'testingaccount@gmail.com', 'role_1': 'doctor', 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "email": "testingaccount@gmail.com", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T14:31:03.642399+00:00"}
{"asctime": "2025-09-06 19:31:03", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/auth/login", "method": "POST", "status_code": 500, "process_time": "2936.44ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T14:31:03.936415+00:00"}
{"asctime": "2025-09-06 19:31:03", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:51931 - \"POST /api/auth/login HTTP/1.1\" 500", "timestamp": "2025-09-06T14:31:03.937688+00:00"}
{"asctime": "2025-09-06 19:35:52", "levelname": "WARNING", "name": "passlib.handlers.bcrypt", "message": "(trapped) error reading bcrypt version", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\user\\Desktop\\metamed_backend\\.venv\\Lib\\site-packages\\passlib\\handlers\\bcrypt.py\", line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module 'bcrypt' has no attribute '__about__'", "timestamp": "2025-09-06T14:35:52.391679+00:00"}
{"asctime": "2025-09-06 19:35:53", "levelname": "INFO", "name": "root", "message": "User logged in successfully", "email": "testingaccount@gmail.com", "role": "doctor", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T14:35:53.282244+00:00"}
{"asctime": "2025-09-06 19:35:53", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/auth/login", "method": "POST", "status_code": 200, "process_time": "8299.99ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T14:35:53.543087+00:00"}
{"asctime": "2025-09-06 19:35:53", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:54686 - \"POST /api/auth/login HTTP/1.1\" 200", "timestamp": "2025-09-06T14:35:53.544424+00:00"}
{"asctime": "2025-09-06 19:37:12", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "OPTIONS", "status_code": 200, "process_time": "1.52ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T14:37:12.277910+00:00"}
{"asctime": "2025-09-06 19:37:12", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:61626 - \"OPTIONS /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T14:37:12.279572+00:00"}
{"asctime": "2025-09-06 19:37:15", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T14:37:15.962396+00:00"}
{"asctime": "2025-09-06 19:37:22", "levelname": "INFO", "name": "utils.doctor_response", "message": "context:[{'id': 'doc_0', 'index': 0, 'score': 0.9716717, 'document': {'id': 'doc_0', 'text': 'dem onstrated the superior ity of catheter ablation over drug therapy for rhythmcontrol in appropriately selected patients. In view ofthe most recent evidence, we upgraded the Class ofRecommendation. 7.Catheter ablation of AF in appropriate patients with heart failure with reduced ejection fraction receives aClass 1 indication: Recent randomized studies have demonstrated the superiority of catheter ablation over drug therapy for rhythm control in patients withheart failure and reduced ejection failure. In view ofthe data, we upgraded the Class of Recommendationfor this population of patients. 8.Recommendations have been updated for device detected AF: In view of recent studies, more pre scriptive recommendations are provided for patients with device detected AF that consider the interaction between episode duration and the patient ’su n d e r l y ing risk for thromboembolism. This includes consid erations for patients with AF detected via implantabledevices and wearables. 9.Left'}}, {'id': 'doc_1', 'index': 1, 'score': 0.8512122, 'document': {'id': 'doc_1', 'text': 'rate control or anantiarrhythmic drug strategy. 3 13In each of 3 meta analyses, QOL was improved.3,10,13Although in the past a trial of antiarrhythmic drugs was advised beforepursuing catheter ablati on, current data support ablation for AF as ﬁrst line therapy even beforeantiarrhythmic drugs; often patients require both. Data on LVEF, hospitalizations, and mortality ratesare less robust, but nearly every larger RCT does showsome bene ﬁt in these outcomes ( Table 27 ). Charac teristics that may identify patients with a higher likelihood of success or failure with AF catheter ablation are listed in Figure 24 . 43 3 .D a t af o rA Fc a t h e t e ra b l a t i o na r ef a rl e s sr o b u s tf o r HFpEF. The largest analysis for this group of patientswas a subanalysis of the CABANA trial of patients withHF; in this subgroup analysis, 778 patients (35% of thestudy population) enrolled in the study who hadNYHA class II HF experienced improvement in sur vival, freedom from AF recurrence, and'}}, {'id': 'doc_5', 'index': 5, 'score': 0.7761143, 'document': {'id': 'doc_5', 'text': 'termediate economic value compared with antiar rhythmic drug therapy.29,30 2b B NR7. In selected patients with asymptomatic or minimally symptomatic AF, catheter ablation may be useful for reducing progression of AF and its associated complications.31 39 Younger patients with few comorbidities and a moderate to high burden of AF or persistent AF and AFL. Synopsis Catheter ablation has becom e an established therapy for AF because of multiple RCTs and evidence from largeregistries and continues to evolve as new technologies aredeveloped. Previous professional society documents haveprovided different recommendations for catheter ablation dependent on whether AF was persistent or parox ysmal. 25,40More recent information has shown that abla tion for AF is more effective than antiarrhythmic drugs forboth persistent and paroxysmal AF and that earlierJACC VOL. 83, NO. 1, 2024 Joglar et al JANUARY 2/9, 2024:109 –279 2023 Guideline for the Diagnosis and Management of Atrial Fibrillation201'}}]", "timestamp": "2025-09-06T14:37:22.867606+00:00"}
{"asctime": "2025-09-06 19:37:24", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T14:37:24.499559+00:00"}
{"asctime": "2025-09-06 19:37:24", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "12462.29ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T14:37:24.749316+00:00"}
{"asctime": "2025-09-06 19:37:24", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:61626 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T14:37:24.750368+00:00"}
{"asctime": "2025-09-06 19:38:19", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T14:38:19.304172+00:00"}
{"asctime": "2025-09-06 19:38:27", "levelname": "INFO", "name": "utils.doctor_response", "message": "context:[{'id': 'doc_0', 'index': 0, 'score': 0.98662347, 'document': {'id': 'doc_0', 'text': 'of AF, which was based only on arrhythmia duration, although useful, tended to emphasize ther apeutic interventions. The new proposed classi ﬁca t i o n ,u s i n gs t a g e s ,r e c o g n i z e sA Fa sad i s e a s econtinuum that requires a variety of strategies at thedifferent stages, from prevention, lifestyle and riskfactor modi ﬁcation, screening, and therapy. 2.AF risk factor modi ﬁcation and prevention: This guideline recognizes lifestyle and risk factor modi ﬁ cation as a pillar of AF management to prevent onset,progression, and adverse outcomes. The guidelineemphasizes risk factor management throughout thedisease continuum and offers more prescriptive rec ommendations, accordingly, including managementof obesity, weight loss, physical activity, smokingJoglar et al JACC VOL. 83, NO. 1, 2024 2023 Guideline for the Diagnosis and Management of Atrial Fibrillation JANUARY 2/9, 2024:109 –279112 cessation, alcohol moderation, hypertension, and other comorbidities. 3.Flexibility in'}}, {'id': 'doc_1', 'index': 1, 'score': 0.9700703, 'document': {'id': 'doc_1', 'text': 'AF have been reported and replicated.7 9 Multiple reports have established that maintenance of optimal risk factors and ideal cardiovascular health areassociated with substantially reduced risk of AF 10,11onset and complications ( Section 5 ,“Lifestyle and Risk Factor Modi ﬁcation [LRFM] for AF Management ”). To reduce risk of AF onset, individuals in the general population,particularly those at increas ed risk of AF, should receive comprehensive integrated LRFM, including maintenanceof ideal weight and weight loss if overweight or obese 1,12; pursue a physically active lifestyle,2particularly if sedentary; receive smoking cessation counseling and/or medications4;m o d e r a t e( #1 standard alcoholic drink/day) or abstain from alcohol and avoidance of binge drinking3; control diabetes5; and control BP in accordance with GDMT.6,13T h e r ei sa l s oa na s s o c i a t i o no fc a n n a b i s , cocaine, methamphetamine, or opiate use with increasedincidence of AF. 14 Recommendation'}}, {'id': 'doc_2', 'index': 2, 'score': 0.9641868, 'document': {'id': 'doc_2', 'text': 'ECG resulted in earlier detection of recurrent AF 13and possibly improvement in survey determined AF related QOL20compared with usual care. 5. LIFESTYLE AND RISK FACTOR MODIFICATION (LRFM) FOR AF MANAGEMENT 5.1. Primary Prevention Recommendation for Primary Prevention Referenced studies that support the recommendation are summarized in the Online Data Supplement . COR LOE RECOMMENDATION 1 B NR1. Patients at increased risk of AF should receive comprehensive guideline directed LRFM for AF, targeting obesity,1physical inactivity,2unhealthy alcohol consumption,3smoking,4diabetes,5and hypertension.6 Synopsis The clinical, family history, and genetic risk factors for AF are well established ( Table 3 ), and risk prediction models ( Section 4.1 ,“Risk Strati ﬁcation and Population Screening ”) for AF have been reported and replicated.7 9 Multiple reports have established that maintenance of optimal risk factors and ideal cardiovascular health areassociated with substantially reduced risk of'}}]", "timestamp": "2025-09-06T14:38:27.238372+00:00"}
{"asctime": "2025-09-06 19:38:28", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T14:38:28.668224+00:00"}
{"asctime": "2025-09-06 19:38:28", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "11435.17ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T14:38:28.804666+00:00"}
{"asctime": "2025-09-06 19:38:28", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:55822 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T14:38:28.805515+00:00"}
{"asctime": "2025-09-06 19:39:05", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T14:39:05.341607+00:00"}
{"asctime": "2025-09-06 19:39:09", "levelname": "INFO", "name": "utils.doctor_response", "message": "context:[{'id': 'doc_0', 'index': 0, 'score': 0.9994947, 'document': {'id': 'doc_0', 'text': 'Rate Episodes Among Patients Without a Previous Diagnosis of AF Recommendations for Oral Anticoagulation for Device Detecte d Atrial High Rate Episodes Among Patients Without a Previous Diagnosis of AFReferenced studies that support the recommendations are summarized in the Online Data Supplement . COR LOE RECOMMENDATIONS 2a B NR1. For patients with a device detected atrial high rate episode (AHRE) lasting ‡24 hours1and with a CHA 2DS2 VASc score ‡2 or equivalent stroke risk,2it is reasonable to initiate oral anticoagulation3within a SDM framework that considers episode du ration and individual patient risk. 2b B NR2. For patients with a device detected AHRE las ting between 5 minutes a nd 24 hours and with a CHA 2DS2 VASc score ‡3o re q u i v a l e n ts t r o k er i s k ,2it may be reasonable to initiate anticoagulation within a SDM framework that considers episode duration and individual patient risk. 3: No Bene ﬁt B NR3. Patients with a device detected AHRE lasting <5 minutes and'}}, {'id': 'doc_1', 'index': 1, 'score': 0.9931496, 'document': {'id': 'doc_1', 'text': 'to initiate anticoagulation within a SDM framework that considers episode duration and individual patient risk. 3: No Bene ﬁt B NR3. Patients with a device detected AHRE lasting <5 minutes and without another indication for oral anti coagulation should not receive oral anticoagulation.4,5 Synopsis AHREs detected by a cardiova scular implantable elec tronic device are associated with a stroke risk lower than that of clinical AF6that varies accord ing to the episode duration1and CHA 2DS2 VASc score.2Clinician con ﬁrma tion of the duration and nature of the longest atrial high rate episode is recommended. 1Episodes lasting $24 hours are associated with a signi ﬁcant risk of stroke or systemic embolism1,7that may be reduced with oral anti coagulation.3By contrast, short ep isodes, commonly deﬁned as <5 minutes, are not associated with clinical events.4,5Patients with episodes of intermediate duration and with an elevated stroke risk may bene ﬁt from oral anticoagulation.2There is an'}}, {'id': 'doc_4', 'index': 4, 'score': 0.98076576, 'document': {'id': 'doc_4', 'text': 'AF. 8,9It is still essential that the intra cardiac tracings are reviewed for con ﬁrmation because false positives are possible. The duration of AF thatmandates intervention with anticoagulation will bediscussed in Section 6.4.1 (“Oral Anticoagulation for Device Detected Atrial High Rate Episodes Among Patients Without a Previous Diagnosis of AF ”). 3. The more frequent and longer monitoring for AF is deployed, the greater the sensitivity in detectingRecommendations for Rhythm Monitoring Tools and Methods Referenced studies that support the recommendations are summarized in the Online Data Supplement . COR LOE RECOMMENDATIONS 1 B NR1. Among individuals without a known history of AF, it is recommended that an initial AF diagnosis be made by a clinician using visual interpretation of the elec trocardiographic signals, regardless of the type of rhythm or monitoring device.1 5 1 B NR2. In patients with an intracardiac rhythm device capable of a diagnosis of AF, such as from an atrial'}}]", "timestamp": "2025-09-06T14:39:09.715374+00:00"}
{"asctime": "2025-09-06 19:39:11", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T14:39:11.675263+00:00"}
{"asctime": "2025-09-06 19:39:12", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "8707.33ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T14:39:12.011820+00:00"}
{"asctime": "2025-09-06 19:39:12", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:57644 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T14:39:12.012679+00:00"}
{"asctime": "2025-09-06 19:41:43", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/embeddings \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T14:41:43.163479+00:00"}
{"asctime": "2025-09-06 19:41:50", "levelname": "INFO", "name": "utils.doctor_response", "message": "context:[{'id': 'doc_2', 'index': 2, 'score': 0.99823856, 'document': {'id': 'doc_2', 'text': 'Label, 2 /C22 Factorial, Random ized, Controlled Clinical Trial to Evaluate the Safety ofApixaban vs Vitamin K An tagonist and Aspirin vs Aspirin Placebo in Patients With Atrial Fibrillation andAcute Coronary Syndrome and/or Percutaneous Coro nary Intervention) (apixab an), showed a 42% relative risk reduction for major bleeding in DOAC based regi mens compared with VKA based regimens (OR, 0.577[95% CI, 0.477 0.698]; P<0.001). 5There was no statis tically signi ﬁcant difference in the risk of ischemic events between groups. The ENTRUST AF PCI (Edox aban Treatment vs Vitamin K Antagonist in PatientsWith Atrial Fibrillation Un dergoing Percutaneous Cor onary Intervention) trial showed that edoxaban based regimens were noninferior to VKA based regimens interms of clinically relevant bleeding after PCI. 3An important limitation of the aforementioned data is thatmost studies compared DOACs monotherapy againstVKA plus aspirin, the only VKA based dual antith rombotic therapy (DAT) regimen'}}, {'id': 'doc_0', 'index': 0, 'score': 0.9964064, 'document': {'id': 'doc_0', 'text': 'witho ut substantially increasing risk of major adverse cardiovascular events. 1 4,6Meta analyses of these trials have shown a slightly increasedrisk of stent thrombosis with dual therapy compared to triple therapy.5Thus, the risk of stent thrombosis must be weighed against the risk of bleeding in determining theantithrombotic regimen after PCI. This is particularly truein patients with a relatively h igh perceived risk of stent thrombosis (complex revascularization, multivessel PCI, previous history of stent thrombosis). Recommendation Speci ﬁc Supportive Text 1. Post PCI antithrombotic regimens comparing DOACs with VKAs in combination with APT in patients with AFw h od on o th a v eas p e c i ﬁc indication for VKAs (eg, mechanical valve) have consistently shown a reduction in clinically relevant bleeding. 1,2,4A meta analysis of 3 R C T sc o m p a r i n gD O A C sw i t hV K A sa f t e rP C I ,P I O N E E RAF PCI (Open Label, Random ized, Controlled, Multi center Study Exploring Two'}}, {'id': 'doc_5', 'index': 5, 'score': 0.9916196, 'document': {'id': 'doc_5', 'text': 'reduce the risk of clinically relevant bleeding.1 4,6 Synopsis Encountering a patient with AF at an increased risk for stroke who undergoes PCI for stable CAD or ACS is acommon clinical scenario. The addition of APT to OACafter PCI introduces a risk for clinically signi ﬁcant bleeding. RCTs have compared the safety and ef ﬁcacy of various antithrombotic regimens after PCI is performed inpatients with AF. They hav e consistently shown that DOACs, when used in conjunction with APT, are associ ated with a lower risk of clinically relevant bleedingcompared to VKAs. 1 5They have also shown that dual therapy with an OAC and single APT with a P2Y12 inhibitorsigni ﬁcantly lowers the risk of clinically relevant bleeding compared with triple therapy (oral anticoagulation, P2Y12 inhibitor, and aspirin) witho ut substantially increasing risk of major adverse cardiovascular events. 1 4,6Meta analyses of these trials have shown a slightly increasedrisk of stent thrombosis with dual therapy compared'}}]", "timestamp": "2025-09-06T14:41:50.583269+00:00"}
{"asctime": "2025-09-06 19:41:54", "levelname": "INFO", "name": "httpx", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\"", "timestamp": "2025-09-06T14:41:54.919682+00:00"}
{"asctime": "2025-09-06 19:41:55", "levelname": "INFO", "name": "root", "message": "Request completed", "path": "/api/chat/doctor/stream", "method": "POST", "status_code": 200, "process_time": "13174.79ms", "client_ip": "127.0.0.1", "timestamp": "2025-09-06T14:41:55.078534+00:00"}
{"asctime": "2025-09-06 19:41:55", "levelname": "INFO", "name": "uvicorn.access", "message": "127.0.0.1:60557 - \"POST /api/chat/doctor/stream HTTP/1.1\" 200", "timestamp": "2025-09-06T14:41:55.079423+00:00"}
